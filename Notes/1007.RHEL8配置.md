---
title: "RHEL8 é…ç½®"
---

# ğŸš€ æ¿€æ´»å’Œå…³é—­å¼€å‘è€…è®¢é˜…ï¼Œæ¿€æ´»åå¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ yum æº

## âœˆï¸ æ¿€æ´»

ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œè”ç½‘æ¿€æ´»ï¼š

```bash
subscription-manager register --username=XXX@mf8.biz  --password=Passw0rd  --auto-attach
```

æ˜¾ç¤ºæ¿€æ´»æˆåŠŸä¿¡æ¯ï¼š

```bash
Registering to: subscription.rhsm.redhat.com:443/subscription
The system has been registered with ID: af282805-635b-4588-8a51-edeaf57x8ace
The registered system name is: www-mf8-biz
Installed Product Current Status:
Product Name: Red Hat Enterprise Linux for x86_64
Status:       Subscribed
```

å¤šè¯•å‡ æ¬¡ï¼Œå›½å†…è®¿é—®ï¼Œç½‘ç»œä¸å¤ªç¨³å®š

## âœˆï¸ å–æ¶ˆæ¿€æ´»å’Œå…³é—­å®˜æ–¹è®¢é˜…çš„æ–¹æ³•ï¼ˆæœ‰å¤šç§æ–¹æ³•å’Œæ“ä½œï¼Œæ ¹æ®éœ€è¦è‡ªè¡Œç»„åˆä½¿ç”¨ï¼‰

- **å…³é—­å®˜æ–¹è®¢é˜…**

  ç¼–è¾‘æ–‡ä»¶ `/etc/yum/pluginconf.d/subscription-manager.conf`ï¼Œæ›´æ”¹å‚æ•°
  `enabled = 1` ä¸º `enabled = 0`

- **ç›´æ¥å¸è½½å®˜æ–¹è®¢é˜…æ¨¡å—**

  ```bash
  yum remove subscription-manager
  ```

  - å½“å¸è½½äº† subscription-manager åï¼Œä½¿ç”¨ yum æˆ– dnf å‘½ä»¤çš„æ—¶å€™ä¼šæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š

    ```text
    Failed loading plugin "product-id": No module named 'subscription_manager'
    Failed loading plugin "subscription-manager": No module named 'subscription_manager'
    Failed loading plugin "upload-profile": No module named 'subscription_manager'
    ```

    å¸è½½ `dnf-plugin-subscription-manager` å°±å¯ä»¥äº†

- **ä»æ­¤ç³»ç»Ÿä¸­åˆ é™¤æ‰€æœ‰è®¢é˜…**

  ```bash
  subscription-manager remove --all
  ```

- **ä»å®¢æˆ·é—¨æˆ·å–æ¶ˆæ³¨å†Œç³»ç»Ÿ**

  ```bash
  subscription-manager unregister
  ```

- **åˆ é™¤æ‰€æœ‰æœ¬åœ°ç³»ç»Ÿå’Œè®¢é˜…æ•°æ®è€Œä¸å½±å“æœåŠ¡å™¨**

  ```bash
  subscription-manager clean
  ```

- **å¤‡ä»½æˆ–åˆ é™¤å®˜æ–¹å­˜å‚¨åº“ï¼ˆæ³¨å†Œåå³ä½¿åˆ é™¤äº†åœ¨åˆ·æ–°æºæ—¶ä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰**

  å®˜æ–¹å­˜å‚¨åº“æ–‡ä»¶ä¸ºï¼š`/etc/yum.repos.d/redhat.repo`

# ğŸš€ æ·»åŠ è½¯ä»¶æº

## âœˆï¸ æ·»åŠ å›½å†…è½¯ä»¶æº

æŸ¥é˜…å„å¤§é•œåƒæ–‡æ¡£ã€‚

- **å¸¸ç”¨çš„ yum æº ï¼ˆ[æ‘˜è‡ªè¿™é‡Œ][link001]ï¼‰**
  - EPEL
  - REMI
  - RPMFusion
  - ELRepo
  - NUX-dextop
  - GhettoForge
  - Psychotic Ninja
  - IUS Community

## âœˆï¸ æ·»åŠ æœ¬åœ° ISO yum æº

1. åˆ›å»ºæŒ‚è½½è·¯å¾„

   ```bash
   mkdir -p /mnt/cdrom
   ```

2. æŒ‚è½½ç³»ç»Ÿé•œåƒå…‰ç›˜åˆ°æŒ‡å®šç›®å½•

   - æŒ‚è½½ iso

     ```bash
     # -t iso0669 æ˜¯æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿï¼Œå…‰ç›˜ä¸º iso9660
     # -o æ˜¯é™„åŠ å‚æ•°ï¼Œro æ˜¯ä»¥åªè¯»æ–¹å¼æŒ‚è½½ï¼Œå› ä¸ºå…‰ç›˜æ˜¯ä¸å¯å†™çš„
     mount -t iso9660 -o ro /dev/cdrom /mnt/cdrom
     ```

   - è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ iso

     ä¿®æ”¹ `/etc/fstab` æ–‡ä»¶ï¼ŒåŠ å…¥ä¸‹é¢ä¸€è¡Œï¼š

     ```text
     /dev/cdrom  /mnt/cdrom  iso9660  defaults  0 0
     ```

3. å¤‡ä»½ã€åˆ é™¤æ‰€æœ‰é»˜è®¤ yum æºï¼ˆéœ€è¦å¤‡ä»½ï¼Œä½†æ˜¯å¦åˆ é™¤æ ¹æ®éœ€è¦ï¼‰

   ```bash
   cd /etc/yum.repos.d
   mkdir bak
   cp ./*.repo bak
   rm *.repo
   ```

4. åˆ›å»ºå¹¶å†™å…¥æœ¬åœ° yum æºé…ç½®æ–‡ä»¶

   1. åˆ›å»º

      ```bash
      touch rhel8-local.repo
      ```

   2. å°†ä¸‹é¢å†…å®¹å†™å…¥ `rhel8-local.repo`

      ```text
      [localREPO]
      name=localhost8
      baseurl=file:///mnt/cdrom/BaseOS
      enable=1
      gpgcheck=0

      [localREPO_APP]
      name=localhost8_app
      baseurl=file:///mnt/cdrom/AppStream
      enable=1
      gpgcheck=0
      ```

## âœˆï¸ ä¿®æ”¹è½¯ä»¶æºåçš„æ“ä½œ

- **æ¸…ç†æ—§ç¼“å­˜**

  ```bash
  yum clean all
  ```

- **ç”Ÿæˆæ–°ç¼“å­˜**

  ```bash
  yum makecache
  ```

- **æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„è½¯ä»¶æº**

  ```bash
  yum repolist
  ```

# ğŸš€ ä¸ºç½‘å¡è®¾ç½®å›ºå®š ipï¼ˆ[æ‘˜è‡ªè¿™é‡Œ][link002]ï¼‰

```bash
# åˆ‡æ¢åˆ° root ç”¨æˆ·
su
# è¿›å…¥ç½‘ç»œé…ç½®æ–‡ä»¶ç›®å½•
cd /etc/sysconfig/network-scripts/
```

ä½¿ç”¨ `ip a` å‘½ä»¤æŸ¥çœ‹ç½‘ç»œç½‘å¡ä¿¡æ¯ï¼Œç¼–è¾‘å¯¹åº”çš„ç½‘å¡æ–‡ä»¶å¯¹æ¯”ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š
(ç½‘å¡åã€ipã€UUID ä¹‹ç±»çš„æ ¹æ®æƒ…å†µä¿®æ”¹)

```text
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
NAME=eth192
UUID=3d9407ec-c449-4d84-822b-9b1ffa986d97
DEVICE=eth192
ONBOOT=yes
IPADDR=192.168.192.168
PREFIX=24
GATEWAY="192.168.192.1"
IPV6_PRIVACY=no
```

> è™šæ‹Ÿæœºçš„ä»…ä¸»æœºç½‘å¡ä¸è¦è®¾ç½® DNS `DNS1=192.168.192.1`ï¼Œå¦åˆ™å¤–ç½‘æ¯æ¬¡éƒ½ä¼šå°è¯•èµ°è¿™ä¸ªç½‘å¡ï¼Œè®¾ç½®äº†ä¼˜å…ˆçº§ä¹Ÿä¸è¡Œï¼Œping å‘½ä»¤å¯çœ‹å‡ºå·®åˆ«

ç„¶åä½¿ç”¨ `systemctl restart NetworkManager` è¿›è¡Œé‡å¯ç½‘ç»œ

# ğŸš€ è®¾ç½®åŒç½‘å¡ä¼˜å…ˆçº§

> [æŸ¥çœ‹åŸæ–‡][link003]
>
> > å¦‚æœä½¿ç”¨äº†åŒç½‘å¡ï¼Œens160 ä¸ºå¤–ç½‘ç½‘å¡ï¼Œens192 ä¸ºå†…ç½‘ç½‘å¡ï¼Œ
> > å¦‚æœ ens192 ç½‘å¡çš„ä¼˜å…ˆçº§æ¯” ens160 ç½‘å¡ä¼˜å…ˆçº§é«˜ï¼Œåˆ™ä¸èƒ½è”ç½‘

- ä½¿ç”¨ `ip route show` æŸ¥çœ‹è·¯ç”±ä¿¡æ¯ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š

  ```text
  default via 192.168.192.1 dev ens192 proto static metric 100
  default via 192.168.1.1 dev ens160 proto dhcp metric 101
  192.168.1.0/24 dev ens160 proto kernel scope link src 192.168.1.50 metric 101
  192.168.192.0/24 dev ens192 proto kernel scope link src 192.168.192.168 metric 100
  ```

  å¯ä»¥çœ‹åˆ°ä¸¤å¼ ç½‘å¡çš„ `metric` (è·ƒç‚¹æ•°)ï¼Œ`ens192` çš„è·ƒç‚¹æ•°é»˜è®¤å€¼æ˜¯ `100`ï¼Œ
  æ¯” `ens160` çš„å€¼å°ï¼Œæ‰€ä»¥ä¼šé€šè¿‡ `ens192` è¿æ¥å¤–ç½‘ï¼ˆä½†æ˜¯ä¸šåŠ¡éœ€æ±‚æ˜¯ `ens160`
  è¿æ¥çš„æ˜¯å†…ç½‘è€Œä¸æ˜¯å¤–ç½‘ï¼‰ï¼Œå› æ­¤ä¸èƒ½è®¿é—®å¤–ç½‘ã€‚

  å‡ºç°ç½‘å¡è·¯ç”±ä¼˜å…ˆçº§é—®é¢˜ä¸»è¦æ˜¯ `metric` çš„å‚æ•°é…ç½®

  **metricï¼š** ä¸ºè·¯ç”±æŒ‡å®šæ‰€éœ€è·ƒç‚¹æ•°çš„æ•´æ•°å€¼ï¼ˆèŒƒå›´æ˜¯ 1 ~ 9999ï¼‰ï¼Œ
  å®ƒç”¨æ¥åœ¨è·¯ç”±è¡¨é‡Œçš„å¤šä¸ªè·¯ç”±ä¸­é€‰æ‹©ä¸è½¬å‘åŒ…ä¸­çš„ç›®æ ‡åœ°å€æœ€ä¸ºåŒ¹é…çš„è·¯ç”±ã€‚
  æ‰€é€‰çš„è·¯ç”±å…·æœ‰æœ€å°‘çš„è·ƒç‚¹æ•°ã€‚è·ƒç‚¹æ•°èƒ½å¤Ÿåæ˜ è·ƒç‚¹çš„æ•°é‡ã€è·¯å¾„çš„é€Ÿåº¦ã€è·¯å¾„å¯é æ€§ã€
  è·¯å¾„ååé‡ä»¥åŠç®¡ç†å±æ€§ã€‚**Metric çš„å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œ
  å¦‚æœä¸¤å—ç½‘å¡çš„ Metric çš„å€¼ç›¸åŒï¼Œå°±ä¼šå‡ºç°æŠ¢å ä¼˜å…ˆçº§ç»§è€Œç½‘å¡å†²çªï¼Œ
  å°†ä¼šæœ‰ä¸€å—ç½‘å¡æ— æ³•è¿æ¥ã€‚**

## âœˆï¸ ä¿®æ”¹ç½‘å¡è·¯ç”±ä¼˜å…ˆçº§

æ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡ä¿®æ”¹ `metric` (è·ƒç‚¹æ•°)ï¼Œæ¥ä¿®æ”¹ç½‘å¡ `ens160` çš„ä¼˜å…ˆçº§ã€‚

è¿™é‡Œä¸ºäº†è®© `ens160` çš„è·¯ç”±ä¼˜å…ˆçº§é«˜äº `ens192`ï¼Œéœ€è¦å°† `ens160` çš„è·ƒç‚¹æ•°æ”¹æˆå°äº
`ens192` çš„è·ƒç‚¹æ•°(é»˜è®¤ `100`)ã€‚æˆ‘ä»¬è¿™é‡Œå°† `ens160` çš„è·ƒç‚¹æ•°æ”¹æˆ `90`ã€‚

ç¼–è¾‘ç½‘å¡ `ens160` å¯¹åº”çš„é…ç½®æ–‡ä»¶
`vim /etc/sysconfig/network-scripts/ifcfg-ens160`ï¼Œ
æ·»åŠ ä¸€ä¸ªå‚æ•° `IPV4_ROUTE_METRIC=90`,

ç„¶åæ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼š

```bash
source /etc/sysconfig/network-scripts/ifcfg-ens160

ifup ens160
```

é‡æ–°æŸ¥çœ‹è·¯ç”±ä¿¡æ¯ï¼š`ip route show`ï¼ŒéªŒè¯ä¿®æ”¹æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸåæµ‹è¯•è”ç½‘å³å¯ã€‚

# ğŸš€ å°†æ™®é€šç”¨æˆ·æ·»åŠ åˆ° sudo ç»„

```bash
# åˆ‡æ¢åˆ° root ç”¨æˆ·
su
# ç¼–è¾‘ sudo æ–‡ä»¶
visudo
# æ·»åŠ ä¸‹é¢ä¸€è¡Œ
xxx  All=(ALL)  ALL
# ä¿å­˜é€€å‡ºå³å¯
```

# ğŸš€ è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ VMware å…±äº«æ–‡ä»¶å¤¹

ç¼–è¾‘ `/etc/fstab` æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢ä¸€è¡Œï¼šï¼ˆæ³¨æ„æŸ¥çœ‹è‡ªå·±çš„ uid å’Œ gidï¼‰

```text
.host:/  /mnt/hgfs  fuse.vmhgfs-fuse  allow_other,uid=1000,gid=1000  0  0
```

# ğŸš€ ä¸Šä¼ å…¬é’¥åˆ°è¿œç¨‹æœåŠ¡å™¨

```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub xxx@192.168.192.168
```

- å¦‚æœæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š

  ```text
  /usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/c/Users/xxx/.ssh/id_rsa.pub"
  /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed

  /usr/bin/ssh-copy-id: ERROR: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  ERROR: @    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
  ERROR: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
  ERROR: IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
  ERROR: Someone could be eavesdropping on you right now (man-in-the-middle attack)!
  ERROR: It is also possible that a host key has just been changed.
  ERROR: The fingerprint for the ECDSA key sent by the remote host is
  ERROR: SHA256:8rVn9W+Lxs3JIDlDtPDuOEok/fa3Hu+jQzlHbZJzuw8.
  ERROR: Please contact your system administrator.
  ERROR: Add correct host key in /c/Users/xxx/.ssh/known_hosts to get rid of this message.
  ERROR: Offending ECDSA key in /c/Users/xxx/.ssh/known_hosts:5
  ERROR: Host key for 192.168.192.168 has changed and you have requested strict checking.
  ERROR: Host key verification failed.
  ```

  åœ¨æœ¬åœ°æœºå™¨çš„ `~/.ssh/known_hosts` æ–‡ä»¶åˆ é™¤è¿œç¨‹ ip ä¿¡æ¯å³å¯

[link001]: https://zhuanlan.zhihu.com/p/57154163
[link002]: https://blog.csdn.net/lxw983520/article/details/102877687
[link003]: https://blog.csdn.net/weixin_44129085/article/details/109118013
