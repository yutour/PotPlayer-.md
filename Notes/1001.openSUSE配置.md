---
title: "openSUSE é…ç½®"
---

# ğŸš€ ä¸ºç½‘å¡è®¾ç½®å›ºå®š ip

```bash
# åˆ‡æ¢åˆ° root ç”¨æˆ·
su
# è¿›å…¥ç½‘ç»œé…ç½®æ–‡ä»¶ç›®å½•
cd /etc/sysconfig/network/
# å¤‡ä»½é»˜è®¤é…ç½®
cp ifcfg-ens34 ifcfg-34.000.bak
```

ä½¿ç”¨ `vim ifcfg-ens34` å‘½ä»¤ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œå†™å…¥ä¸‹é¢å†…å®¹ï¼ˆæ³¨é‡Šä¸è¦å†™ï¼ŒæŠŠæ³¨é‡Šåˆ æ‰ï¼‰

```text
BOOTPROTO='static'  # é™æ€ ip
STARTMODE='auto'
IPADDR=192.168.192.168  # ip åœ°å€
NNETMASK=255.255.255.0  # å­ç½‘æ©ç 
GATEWAY=192.168.192.1  # ç½‘å…³
ZONE=public
```

é‡å¯è™šæ‹Ÿæœºæˆ–ä½¿ç”¨ `service network restart` é‡å¯è™šæ‹Ÿæœºç½‘ç»œåä½¿ç”¨ `ip a` å‘½ä»¤æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ

# ğŸš€ è®¾ç½® ssh æœåŠ¡

ä¸€èˆ¬éƒ½è¯´ä¿®æ”¹ `/etc/ssh/sshd_config` æ–‡ä»¶ï¼Œ
å¦‚æœæ‰¾ä¸åˆ°çœ‹çœ‹æœ‰æ²¡æœ‰ `/usr/etc/ssh/sshd_config` æ–‡ä»¶ï¼Œ
å¦‚æœæœ‰ `/etc/ssh/sshd_config` åˆ™ä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼ˆæ³¨é‡Šå¯ä»¥ä¸å†™ï¼‰ï¼Œ

```bash
# ç¦æ­¢ root ç”¨æˆ·è¿œç¨‹ç™»å½•
PermitRootLogin no
# ä½¿ç”¨å¯†é’¥ç™»å½•ssh
PubkeyAuthentication yes
# ç¦æ­¢å¯†ç æ–¹å¼ç™»å½•
PasswordAuthentication no
```

å¦‚æœæ²¡æœ‰ `/etc/ssh/sshd_config` ,ä½†æ˜¯å­˜åœ¨ `/usr/etc/ssh/sshd_config` æ–‡ä»¶ï¼Œ
ä¸”æ–‡ä»¶é‡Œé¢æœ‰ `Include /etc/ssh/sshd_config.d/*.conf` è¿™ä¸€å¥ï¼Œ
é‚£ä¹ˆæˆ‘ä»¬å°±åœ¨ `/etc/ssh/sshd_config.d/` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªè‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œ
å¦‚ `my_sshd_config.conf`ï¼Œç„¶ååœ¨æ­¤æ–‡ä»¶æ ¹æ®éœ€è¦å†™å…¥ä¸Šé¢çš„å‡ å¥é…ç½®

ç„¶åä½¿ç”¨ `service sshd restart` å‘½ä»¤é‡å¯ sshd æœåŠ¡

## âœˆï¸ ä½¿ç”¨ WinSCP å¯†é’¥å…å¯†ç™»é™†æ—¶å€™æç¤ºï¼š_æœåŠ¡å™¨æ‹’ç»äº†æˆ‘ä»¬çš„å¯†é’¥_

æœ€æ–°ç‰ˆçš„ openSSH ä¸­ç¦æ­¢äº† SHA-1 ç®—æ³•çš„ RSA ç­¾åï¼Œ
ä½¿ç”¨ `systemctl status sshd` å¯ä»¥çœ‹åˆ°æ‹’ç»ä¿¡æ¯ï¼š`userauth_pubkey: key type ssh-rsa not in PubkeyAcceptedAlgorithms [preauth]`

è§£å†³æ–¹æ³•ä¸€ï¼ˆæœªæµ‹è¯•ï¼‰[å‚è€ƒ][link001]ï¼šåœ¨ç”¨æˆ· ssh é…ç½®æ–‡ä»¶~/.ssh/config ä¸­çš„ä»¥ä¸‹å¯¹å•å°ç›®æ ‡ä¸»æœºå¯ç”¨ RSA/SHA1ï¼š

```text
Host Chongchong
HostkeyAlgorithms +ssh-rsa
PubkeyAcceptedAlgorithms +ssh-rsa
```

è§£å†³æ–¹æ³•äºŒ[å‚è€ƒ][link002]ï¼šåœ¨ sshd é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®åæ‰§è¡Œ `systemctl restart sshd`ï¼š

```text
PubkeyAuthentication yes
PubkeyAcceptedKeyTypes=+ssh-rsa
```

è§£å†³æ–¹æ³•ä¸‰ï¼ˆæœªæµ‹è¯•ï¼‰[å‚è€ƒ][link003]ï¼šå¤‡ä»½ `/etc/crypto-policies/back-ends/opensshserver.config` æ–‡ä»¶ååœ¨ `PubkeyAcceptedKeyTypes` é¡¹æœ«å°¾æ·»åŠ  `ssh-rsa`
ç„¶åæ‰§è¡Œ `systemctl restart sshd`

**å»ºè®®åªåœ¨ç‰¹æ®Šæƒ…å†µä¸‹æš‚æ—¶å¯ç”¨ RSA/SHA1ï¼Œå¯¹å‡ºç°è¯¥é—®é¢˜çš„ä¸»æœºå°½å¿«å‡çº§ç‰ˆæœ¬æˆ–è€…æ›´æ¢è¯ä¹¦ç±»å‹ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ ECDSA æˆ– Ed25519ã€‚**

# ğŸš€ è®¾ç½® yast åˆ é™¤è½¯ä»¶æ—¶è‡ªåŠ¨æ¸…ç†

```bash
# è¿›å…¥é…ç½®æ–‡ä»¶å¤¹
cd /etc/zypp/
# å¤‡ä»½é»˜è®¤é…ç½®
cp zypp.conf zypp.conf.000.bak
```

ç¼–è¾‘ `zypp.conf` æ–‡ä»¶ï¼Œæ‰“å¼€ `solver.cleandepsOnRemove = false` çš„æ³¨é‡Šå¹¶è®¾ç½®å€¼ä¸º `true`

# ğŸš€ æ·»åŠ é€Ÿåº¦è¿˜å¯ä»¥çš„ debug æºå’Œ source æºï¼ˆç‘å…¸ LinkÃ¶ping University å¤§å­¦ï¼‰

- debug æº

  <https://ftp.lysator.liu.se/pub/opensuse/debug/tumbleweed/repo/oss/>

- source æº

  <https://ftp.lysator.liu.se/pub/opensuse/source/tumbleweed/repo/oss/>

  <https://ftp.lysator.liu.se/pub/opensuse/source/tumbleweed/repo/non-oss/>

# ğŸš€ zsh é…ç½®

å®‰è£… zshï¼Œä½¿ç”¨ oh-my-zsh é…ç½®é›†
ç¼–è¾‘ `~/.zshrc` è®¾ç½®ä¸»é¢˜ä¸º `xiong-chiamiov-plus`ï¼Œå¼€å¯æ’ä»¶ `colored-man-pages`ï¼Œ
æ·»åŠ å‘½ä»¤åˆ«å `alias cls="clear"`ï¼Œæ·»åŠ  openSUSE TW ç³»ç»Ÿç‰ˆæœ¬å‡çº§å‘½ä»¤åˆ«åï¼š
`alias zgun="sudo zypper dup --no-allow-vendor-change"`

root ç”¨æˆ·çš„ä¸»é¢˜ä½¿ç”¨è‡ªå·±ä¿®æ”¹çš„ï¼š`my.zsh-theme`ï¼Œæ–‡ä»¶æ”¾åˆ° `/root/.oh-my-zsh/custom/themes/` ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```text
# user, host, full path, and time/date
# on two lines for easier vgrepping
# entry in a nice long thread on the Arch Linux forums: https://bbs.archlinux.org/viewtopic.php?pid=521888#p521888
PROMPT=$'%{\e[0;35m%}%Bâ”Œâ”€[%b%{\e[0m%}%{\e[1;31m%}%n%{\e[1;30m%}@%{\e[0m%}%{\e[0;36m%}%m%{\e[0;35m%}%B]%b%{\e[0m%} - %b%{\e[0;35m%}%B[%b%{\e[1;31m%}%~%{\e[0;35m%}%B]%b%{\e[0m%} - %{\e[0;35m%}%B[%b%{\e[0;33m%}'%D{"%a %b %d, %H:%M"}%b$'%{\e[0;35m%}%B]%b%{\e[0m%}
%{\e[0;35m%}%Bâ””â”€%B[%{\e[1;34m%}#%{\e[0;35m%}%B] <$(git_prompt_info)>%{\e[0m%}%b '
PS2=$' \e[0;35m%}%B>%{\e[0m%}%b '
```

ä¿®æ”¹ `/etc/passwd` æ–‡ä»¶è®¾ç½®å„ä¸ªçš„é»˜è®¤ shell

# ğŸš€ ç»ˆç«¯ä»£ç†

## âœˆï¸ æŸ¥çœ‹ä»£ç†

[å‚è€ƒ][link006]

- æŸ¥çœ‹ç¯å¢ƒå˜é‡ç®€ä»‹ï¼š
  1. ä½¿ç”¨ `echo` å‘½ä»¤æŸ¥çœ‹å•ä¸ªç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼š`echo $PATH`
  2. ä½¿ç”¨ `env` æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼š`env`
  3. ä½¿ç”¨ set æŸ¥çœ‹æ‰€æœ‰æœ¬åœ°å®šä¹‰çš„ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ï¼š`set`
- æŸ¥çœ‹ä»£ç†ï¼š

  ```bash
  echo $http_proxy
  echo $https_proxy
  echo $ftp_proxy
  echo $no_proxy
  ```

## âœˆï¸ è®¾ç½®ä»£ç†

[å‚è€ƒ][link004]

### ğŸš„ linux shell ç»ˆç«¯ä»£ç†è®¾ç½®æ–¹æ³•

linux è¦åœ¨ shell ç»ˆç«¯ä¸º httpã€httpsã€ftp åè®®è®¾ç½®ä»£ç†ï¼Œå€¼éœ€è¦è®¾ç½®å¯¹åº”çš„ç¯å¢ƒå˜é‡å³å¯ã€‚
ä¸‹é¢æ˜¯ä¸€äº›å…³äºä»£ç†çš„ç¯å¢ƒå˜é‡ï¼š

- http_proxy

  - ä¸º http ç½‘ç«™è®¾ç½®ä»£ç†
  - ç¤ºä¾‹ï¼š

    ```text
    10.0.0.51:8080;
    user:pass@10.0.0.10:8080
    socks4://10.0.0.51:1080
    socks5://192.168.1.1:1080
    ```

- https_proxy
  - ä¸º https ç½‘ç«™è®¾ç½®ä»£ç†
  - ç¤ºä¾‹åŒ http_proxy
- ftp_proxy

  - ä¸º ftp ç½‘ç«™è®¾ç½®ä»£ç†
  - ç¤ºä¾‹ï¼š

    ```text
    socks5://192.168.1.1:1080
    ```

- no_proxy

  - æ— éœ€ä»£ç†çš„ä¸»æœºæˆ–åŸŸåï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œå¤šä¸ªæ—¶ä½¿ç”¨â€œ,â€å·åˆ†éš”
  - ç¤ºä¾‹ï¼š

    ```text
    *.aiezu.com,10.*.*.*,192.168.*.*,
    *.local,localhost,127.0.0.1
    ```

å¯ä»¥å°†ä¸Šé¢ 4 ä¸ªç¯å¢ƒå˜é‡è®¾ç½®é¡¹æ”¾äº `~/.bashrc` æ–‡ä»¶å°¾éƒ¨ï¼Œè¿™æ ·ç”¨æˆ·æ‰“å¼€ bash shell ç»ˆç«¯æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨æ­¤è„šæœ¬ï¼Œè¯»å…¥å®ƒä»¬ã€‚

### ğŸš„ linux bash ä¸º http ç«™ç‚¹è®¾ç½®ä»£ç†

æ ¹æ®ä»£ç†ç±»å‹ï¼Œå°†ä¸‹é¢å¯¹åº”çš„è®¾ç½®é¡¹æ·»åŠ åˆ° `~/.bashrc` æ–‡ä»¶æœ«å°¾ï¼Œç„¶åè¿è¡Œ`. ~/.bashrc`ï¼ˆå‰é¢æ˜¯ä¸€ä¸ªâ€œ.â€å·ï¼‰å‘½ä»¤ä½¿ç”¨ä¹‹åœ¨å½“å‰ç¯å¢ƒç”Ÿæ•ˆã€‚

1. ä¸º http ç«™ç‚¹è®¾ç½® http ä»£ç†ï¼ˆé»˜è®¤ï¼‰ï¼š

   ```bash
   export http_proxy=10.0.0.52:8080
   ```

2. ä¸º http ç«™ç‚¹è®¾ç½® sock4ã€sock5 ä»£ç†ï¼š

   ```bash
   # è®¾ç½® socks ä»£ç†ï¼Œè‡ªåŠ¨è¯†åˆ« socks ç‰ˆæœ¬
   export http_proxy=socks://10.0.0.52:1080
   # è®¾ç½® socks4 ä»£ç†
   export http_proxy=socks4://10.0.0.52:1080
   # è®¾ç½® socks5 ä»£ç†
   export http_proxy=socks5://10.0.0.52:1080
   ```

3. ä»£ç†ä½¿ç”¨ç”¨æˆ·åå¯†ç è®¤è¯ï¼š

   ```bash
   export http_proxy=user:pass@192.158.8.8:8080
   ```

### ğŸš„ linux bash ä¸º https ç«™ç‚¹è®¾ç½®ä»£ç†

å¦‚æœéœ€è¦ä¸º https ç½‘ç«™è®¾ç½®ä»£ç†ï¼Œè®¾ç½® `https_proxy` ç¯å¢ƒå˜é‡å³å¯ï¼›è®¾ç½®æ–¹æ³•å®Œå…¨ä¸ `http_proxy` ç¯å¢ƒå˜é‡ç›¸åŒï¼š

```bash
# ä»»æ„ä½¿ç”¨ä¸€é¡¹
export https_proxy=10.0.0.52:8080
export https_proxy=user:pass@192.158.8.8:8080
export https_proxy=socks://10.0.0.52:1080
export https_proxy=socks4://10.0.0.52:1080
export https_proxy=socks5://10.0.0.52:1080
```

### ğŸš„ ä¸¾ä¾‹

ç°åœ¨æˆ‘ä»¬è¦è®¾ç½® httpã€https ç½‘ç«™éƒ½ä½¿ç”¨ socks5 ä»£ç† 10.0.0.52:1080ï¼Œä¸‹é¢ä¸ºå®Œæ•´è®¾ç½®æ–¹æ³•ï¼š

1. vim ~/.bashrcï¼Œåœ¨æ–‡ä»¶å°¾éƒ¨æ·»åŠ ä¸‹é¢å†…å®¹ï¼š

   ```bash
   export http_proxy=socks5://10.0.0.52:1080
   export https_proxy=socks5://10.0.0.52:1080
   export no_proxy="*.aiezu.com,10.*.*.*,192.168.*.*,*.local,localhost,127.0.0.1"
   ```

2. åŠ è½½è®¾ç½®:

   ```bash
   [root@aiezu.com ~]# . ~/.bashrc
   [root@aiezu.com ~]# echo $http_proxy
   socks5://10.0.0.52:1080
   [root@aiezu.com ~]# echo $https_proxy
   socks5://10.0.0.52:1080
   ```

3. æµ‹è¯•ä»£ç†ï¼š

   ```bash
   [root@aiezu.com ~]# curl -I http://www.fackbook.com
   HTTP/1.1 200 OK
   Content-Length: 2423
   Content-Type: text/html
   Last-Modified: Mon, 14 Nov 2016 22:03:32 GMT
   Accept-Ranges: bytes
   ETag: "0521af0c23ed21:0"
   Server: Microsoft-IIS/7.5
   X-Powered-By: ASP.NET
   Date: Sun, 11 Dec 2016 13:21:33 GMT
   ```

## âœˆï¸ å–æ¶ˆä»£ç†

[å‚è€ƒ 1][link005]ã€[å‚è€ƒ 2][link006]

- ä½¿ç”¨ unset åˆ é™¤æŒ‡å®šçš„ç¯å¢ƒå˜é‡ç®€ä»‹ï¼š
  set å¯ä»¥è®¾ç½®æŸä¸ªç¯å¢ƒå˜é‡çš„å€¼ã€‚æ¸…é™¤ç¯å¢ƒå˜é‡çš„å€¼ç”¨ unset å‘½ä»¤ã€‚å¦‚æœæœªæŒ‡å®šå€¼ï¼Œåˆ™è¯¥å˜é‡å€¼å°†è¢«è®¾ä¸º NULLã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š
  `export TEST="Test..."` å¢åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ TESTï¼Œ `env|grep TEST` æ­¤å‘½ä»¤æœ‰è¾“å‡ºï¼Œè¯æ˜ç¯å¢ƒå˜é‡ TEST å·²ç»å­˜åœ¨äº†
  `TEST=Test...`ï¼Œ`unset TEST` åˆ é™¤ç¯å¢ƒå˜é‡ TESTï¼Œ`env|grep TEST` æ­¤å‘½ä»¤æ²¡æœ‰è¾“å‡ºï¼Œè¯æ˜ç¯å¢ƒå˜é‡ TEST å·²ç»åˆ é™¤
- å–æ¶ˆä»£ç†ï¼š

  ```bash
  unset http_proxy
  unset https_proxy
  unset ftp_proxy
  unset no_proxy
  ```

# ğŸš€ Webmin ç®¡ç†é¢æ¿

> æš‚æ—¶å‘ç°çš„é—®é¢˜ï¼š
>
> - æ–‡ä»¶ç®¡ç†å™¨åœ¨é»˜è®¤çš„ authentic ä¸»é¢˜ä¸‹ä¸èƒ½ç”¨ï¼Œéœ€æ›´æ¢åˆ°æ—§çš„ä¸»é¢˜
> - åœ¨é¢æ¿é‡Œè®¾ç½®å¼€æœºå¯åŠ¨ä¸èƒ½ç”Ÿæ•ˆï¼Œä¸çŸ¥è¯¥å¦‚ä½•è®¾ç½®

## âœˆï¸ å®‰è£…å‰å‡†å¤‡

1. å®‰è£…ä¾èµ–åŒ…

   ```bash
   sudo zypper install apache2 openssl openssl-devel perl perl-Encode-Detect
   ```

2. ä¸‹è½½ Webmin çš„ rpm åŒ…ï¼ˆæ³¨æ„å®‰è£…æ—¶æŸ¥çœ‹å®˜ç½‘æ›´æ¢ä¸‹é¢ä¸ºæœ€æ–°ç‰ˆæœ¬ï¼Œé“¾æ¥å¯èƒ½ä¸åŒï¼‰

   ```bash
   wget https://prdownloads.sourceforge.net/webadmin/webmin-1.981-1.noarch.rpm
   ```

## âœˆï¸ å®‰è£… Webmin

1. å®‰è£…

   ```bash
   rpm -ivh webmin-1.981-1.noarch.rpm
   ```

2. å¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º `10000`

[link001]: https://baijiahao.baidu.com/s?id=1712036353311241066&wfr=spider&for=pc
[link002]: https://bbs.archlinux.org/viewtopic.php?id=270005
[link003]: https://forums.centos.org/viewtopic.php?t=74233
[link004]: http://aiezu.com/article/linux_bash_set_proxy.html
[link005]: https://www.cnblogs.com/clairedandan/p/12618465.html
[link006]: https://www.cnblogs.com/qiuhong10/p/7815943.html
